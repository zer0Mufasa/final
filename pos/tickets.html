<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tickets | Fixology POS</title>
  <base href="/pos/">
  <link rel="icon" type="image/webp" href="https://i.ibb.co/GfPnk0zV/preview.webp">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <style>
    /* ============================================
       FIXOLOGY POS - UNIQUE DESIGN SYSTEM
       ============================================ */

    /* CSS Variables */
    :root {
      /* Brand Colors */
      --primary: #5D3FD3;
      --primary-dark: #4A32A8;
      --primary-light: #7B5FE0;
      --secondary: #E6E6FA;
      --accent: #7C3AED;
      
      /* Status Gradients (LEFT border style - unique to Fixology) */
      --status-new: linear-gradient(180deg, #3B82F6, #1D4ED8);
      --status-diagnosed: linear-gradient(180deg, #8B5CF6, #5D3FD3);
      --status-waiting: linear-gradient(180deg, #F59E0B, #D97706);
      --status-repair: linear-gradient(180deg, #6366F1, #4338CA);
      --status-ready: linear-gradient(180deg, #10B981, #047857);
      --status-picked: linear-gradient(180deg, #6B7280, #374151);
      --status-cancelled: linear-gradient(180deg, #EF4444, #B91C1C);
      
      /* Semantic Colors */
      --success: #10B981;
      --success-light: #D1FAE5;
      --warning: #F59E0B;
      --warning-light: #FEF3C7;
      --danger: #EF4444;
      --danger-light: #FEE2E2;
      --info: #3B82F6;
      --info-light: #DBEAFE;
      
      /* Backgrounds */
      --bg-body: #F8F7FF;
      --bg-card: #FFFFFF;
      --bg-sidebar: #1F1B3A;
      --bg-sidebar-hover: #2D2750;
      --bg-input: #F3F4F6;
      
      /* Text */
      --text-primary: #1F2937;
      --text-secondary: #6B7280;
      --text-muted: #9CA3AF;
      --text-inverse: #FFFFFF;
      
      /* Borders */
      --border-color: #E5E7EB;
      --border-focus: #5D3FD3;
      
      /* Shadows */
      --shadow-sm: 0 1px 2px rgba(0,0,0,0.05);
      --shadow-md: 0 4px 6px rgba(0,0,0,0.07);
      --shadow-lg: 0 10px 25px rgba(0,0,0,0.1);
      --shadow-card: 0 2px 8px rgba(93,63,211,0.08);
      --shadow-card-hover: 0 8px 25px rgba(93,63,211,0.15);
      
      /* Spacing */
      --space-1: 4px;
      --space-2: 8px;
      --space-3: 12px;
      --space-4: 16px;
      --space-5: 20px;
      --space-6: 24px;
      --space-8: 32px;
      --space-10: 40px;
      
      /* Border Radius */
      --radius-sm: 6px;
      --radius-md: 10px;
      --radius-lg: 14px;
      --radius-xl: 20px;
      --radius-full: 9999px;
      
      /* Transitions */
      --transition-fast: 0.15s ease;
      --transition-normal: 0.25s ease;
      --transition-slow: 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      
      /* Z-index */
      --z-dropdown: 100;
      --z-modal: 200;
      --z-toast: 300;
      
      /* Fonts */
      --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      --font-mono: 'JetBrains Mono', 'SF Mono', monospace;
    }

    /* ============================================
       RESET & BASE
       ============================================ */
    *, *::before, *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html, body {
      height: 100%;
      overflow: hidden;
    }

    body {
      font-family: var(--font-sans);
      font-size: 14px;
      line-height: 1.5;
      color: var(--text-primary);
      background: var(--bg-body);
      -webkit-font-smoothing: antialiased;
    }

    a {
      color: var(--primary);
      text-decoration: none;
    }

    a:hover {
      text-decoration: underline;
    }

    button {
      font-family: inherit;
      cursor: pointer;
    }

    input, select, textarea {
      font-family: inherit;
      font-size: inherit;
    }

    /* ============================================
       LAYOUT
       ============================================ */
    .pos-app {
      display: flex;
      height: 100vh;
      overflow: hidden;
    }

    /* Sidebar */
    .pos-sidebar {
      width: 240px;
      background: var(--bg-sidebar);
      display: flex;
      flex-direction: column;
      flex-shrink: 0;
      transition: width var(--transition-normal);
    }

    .pos-sidebar.collapsed {
      width: 72px;
    }

    .sidebar-header {
      padding: var(--space-5);
      border-bottom: 1px solid rgba(255,255,255,0.08);
    }

    .sidebar-logo {
      display: flex;
      align-items: center;
      gap: var(--space-3);
    }

    .sidebar-logo img {
      width: 36px;
      height: 36px;
    }

    .sidebar-logo span {
      font-size: 20px;
      font-weight: 700;
      color: white;
      background: linear-gradient(135deg, #E6E6FA, #A78BFA);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .pos-sidebar.collapsed .sidebar-logo span {
      display: none;
    }

    .sidebar-nav {
      flex: 1;
      padding: var(--space-4) var(--space-3);
      overflow-y: auto;
      scrollbar-width: none;
    }

    .sidebar-nav::-webkit-scrollbar {
      display: none;
    }

    .nav-section {
      margin-bottom: var(--space-6);
    }

    .nav-section-title {
      font-size: 10px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 1px;
      color: rgba(255,255,255,0.4);
      padding: 0 var(--space-3);
      margin-bottom: var(--space-2);
    }

    .pos-sidebar.collapsed .nav-section-title {
      display: none;
    }

    .nav-link {
      display: flex;
      align-items: center;
      gap: var(--space-3);
      padding: var(--space-3) var(--space-3);
      border-radius: var(--radius-md);
      color: rgba(255,255,255,0.7);
      font-size: 14px;
      font-weight: 500;
      transition: all var(--transition-fast);
      text-decoration: none;
      margin-bottom: 2px;
    }

    .nav-link:hover {
      background: var(--bg-sidebar-hover);
      color: white;
      text-decoration: none;
    }

    .nav-link.active {
      background: linear-gradient(135deg, rgba(93,63,211,0.3), rgba(124,58,237,0.2));
      color: white;
    }

    .nav-link .icon {
      font-size: 18px;
      width: 24px;
      text-align: center;
    }

    .nav-link .badge {
      margin-left: auto;
      padding: 2px 8px;
      font-size: 11px;
      font-weight: 600;
      background: var(--primary);
      color: white;
      border-radius: var(--radius-full);
    }

    .pos-sidebar.collapsed .nav-link span:not(.icon):not(.badge) {
      display: none;
    }

    .pos-sidebar.collapsed .nav-link .badge {
      display: none;
    }

    .sidebar-footer {
      padding: var(--space-4);
      border-top: 1px solid rgba(255,255,255,0.08);
    }

    .sidebar-user {
      display: flex;
      align-items: center;
      gap: var(--space-3);
      padding: var(--space-3);
      border-radius: var(--radius-md);
      background: rgba(255,255,255,0.05);
    }

    .sidebar-user .avatar {
      width: 36px;
      height: 36px;
      border-radius: var(--radius-md);
      background: linear-gradient(135deg, var(--primary), var(--accent));
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      color: white;
    }

    .sidebar-user .info {
      flex: 1;
      min-width: 0;
    }

    .sidebar-user .name {
      font-size: 13px;
      font-weight: 600;
      color: white;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .sidebar-user .role {
      font-size: 11px;
      color: rgba(255,255,255,0.5);
    }

    .pos-sidebar.collapsed .sidebar-user .info {
      display: none;
    }

    /* Main Content */
    .pos-main {
      flex: 1;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    /* Header */
    .pos-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: var(--space-4) var(--space-6);
      background: white;
      border-bottom: 1px solid var(--border-color);
      flex-shrink: 0;
    }

    .header-left {
      display: flex;
      align-items: center;
      gap: var(--space-5);
    }

    .header-title {
      font-size: 22px;
      font-weight: 700;
      color: var(--text-primary);
      display: flex;
      align-items: center;
      gap: var(--space-3);
    }

    .header-title .count {
      font-size: 13px;
      font-weight: 600;
      padding: 4px 12px;
      background: var(--secondary);
      color: var(--primary);
      border-radius: var(--radius-full);
    }

    .header-right {
      display: flex;
      align-items: center;
      gap: var(--space-3);
    }

    /* Content Area */
    .pos-content {
      flex: 1;
      overflow: auto;
      padding: var(--space-6);
    }

    /* ============================================
       BUTTONS
       ============================================ */
    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: var(--space-2);
      padding: 10px 18px;
      font-size: 14px;
      font-weight: 600;
      border: none;
      border-radius: var(--radius-lg);
      cursor: pointer;
      transition: all var(--transition-fast);
      text-decoration: none;
      white-space: nowrap;
    }

    .btn:hover {
      transform: translateY(-1px);
      text-decoration: none;
    }

    .btn:active {
      transform: translateY(0);
    }

    .btn-primary {
      background: linear-gradient(135deg, var(--primary), var(--accent));
      color: white;
      box-shadow: 0 4px 14px rgba(93,63,211,0.35);
    }

    .btn-primary:hover {
      box-shadow: 0 6px 20px rgba(93,63,211,0.45);
    }

    .btn-secondary {
      background: white;
      color: var(--text-primary);
      border: 1px solid var(--border-color);
      box-shadow: var(--shadow-sm);
    }

    .btn-secondary:hover {
      background: var(--bg-input);
      border-color: var(--text-muted);
    }

    .btn-success {
      background: linear-gradient(135deg, var(--success), #047857);
      color: white;
    }

    .btn-danger {
      background: linear-gradient(135deg, var(--danger), #B91C1C);
      color: white;
    }

    .btn-ghost {
      background: transparent;
      color: var(--text-secondary);
      padding: 8px 12px;
    }

    .btn-ghost:hover {
      background: var(--bg-input);
      color: var(--text-primary);
      transform: none;
    }

    .btn-icon {
      width: 38px;
      height: 38px;
      padding: 0;
      border-radius: var(--radius-md);
    }

    .btn-sm {
      padding: 6px 12px;
      font-size: 13px;
    }

    .btn-lg {
      padding: 14px 24px;
      font-size: 16px;
    }

    /* ============================================
       INPUTS
       ============================================ */
    .form-group {
      margin-bottom: var(--space-5);
    }

    .form-label {
      display: block;
      font-size: 13px;
      font-weight: 500;
      color: var(--text-secondary);
      margin-bottom: var(--space-2);
    }

    .form-input {
      width: 100%;
      padding: 12px 14px;
      font-size: 14px;
      border: 1px solid var(--border-color);
      border-radius: var(--radius-md);
      background: white;
      color: var(--text-primary);
      transition: all var(--transition-fast);
    }

    .form-input:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(93,63,211,0.1);
    }

    .form-input::placeholder {
      color: var(--text-muted);
    }

    .form-select {
      appearance: none;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%236B7280' stroke-width='2'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 12px center;
      padding-right: 36px;
    }

    .form-textarea {
      resize: vertical;
      min-height: 100px;
    }

    .search-box {
      position: relative;
    }

    .search-box .icon {
      position: absolute;
      left: 14px;
      top: 50%;
      transform: translateY(-50%);
      color: var(--text-muted);
      pointer-events: none;
    }

    .search-box input {
      padding-left: 42px;
    }

    /* ============================================
       CARDS
       ============================================ */
    .card {
      background: var(--bg-card);
      border-radius: var(--radius-lg);
      border: 1px solid var(--border-color);
      box-shadow: var(--shadow-card);
      transition: all var(--transition-normal);
    }

    .card:hover {
      box-shadow: var(--shadow-card-hover);
    }

    .card-header {
      padding: var(--space-5);
      border-bottom: 1px solid var(--border-color);
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .card-title {
      font-size: 15px;
      font-weight: 600;
      color: var(--text-primary);
    }

    .card-body {
      padding: var(--space-5);
    }

    .card-footer {
      padding: var(--space-4) var(--space-5);
      border-top: 1px solid var(--border-color);
      background: var(--bg-input);
      border-radius: 0 0 var(--radius-lg) var(--radius-lg);
    }

    /* ============================================
       TICKET CARDS (UNIQUE LEFT BORDER STYLE)
       ============================================ */
    .ticket-card {
      position: relative;
      background: white;
      border-radius: var(--radius-lg);
      padding: var(--space-4);
      margin-bottom: var(--space-3);
      cursor: pointer;
      transition: all var(--transition-normal);
      border: 1px solid var(--border-color);
      overflow: hidden;
    }

    /* LEFT border indicator - UNIQUE to Fixology */
    .ticket-card::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      bottom: 0;
      width: 4px;
      border-radius: var(--radius-lg) 0 0 var(--radius-lg);
    }

    .ticket-card.status-new::before { background: var(--status-new); }
    .ticket-card.status-diagnosed::before { background: var(--status-diagnosed); }
    .ticket-card.status-waiting::before { background: var(--status-waiting); }
    .ticket-card.status-repair::before { background: var(--status-repair); }
    .ticket-card.status-ready::before { background: var(--status-ready); }
    .ticket-card.status-picked::before { background: var(--status-picked); }
    .ticket-card.status-cancelled::before { background: var(--status-cancelled); }

    .ticket-card:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-lg);
      border-color: var(--primary);
    }

    .ticket-card-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: var(--space-3);
    }

    .ticket-id {
      font-family: var(--font-mono);
      font-size: 13px;
      font-weight: 600;
      color: var(--primary);
    }

    .ticket-time {
      font-size: 12px;
      color: var(--text-muted);
    }

    .ticket-customer {
      font-size: 15px;
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: var(--space-1);
    }

    .ticket-device {
      font-size: 13px;
      color: var(--text-secondary);
      margin-bottom: var(--space-3);
    }

    .ticket-card-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .ticket-issue {
      font-size: 12px;
      color: var(--text-muted);
      padding: 4px 10px;
      background: var(--bg-input);
      border-radius: var(--radius-sm);
    }

    .ticket-price {
      font-family: var(--font-mono);
      font-size: 16px;
      font-weight: 700;
      color: var(--text-primary);
    }

    /* Priority Flag */
    .priority-flag {
      width: 8px;
      height: 8px;
      border-radius: 50%;
    }

    .priority-flag.urgent { background: var(--danger); box-shadow: 0 0 6px var(--danger); }
    .priority-flag.high { background: var(--warning); }
    .priority-flag.normal { background: var(--success); }
    .priority-flag.low { background: var(--text-muted); }

    /* Progress Dots */
    .progress-dots {
      display: flex;
      gap: 4px;
    }

    .progress-dots .dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: var(--border-color);
    }

    .progress-dots .dot.active {
      background: var(--primary);
    }

    .progress-dots .dot.completed {
      background: var(--success);
    }

    /* ============================================
       STATUS PILLS (GRADIENT)
       ============================================ */
    .status-pill {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 5px 12px;
      font-size: 12px;
      font-weight: 600;
      border-radius: var(--radius-full);
      color: white;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .status-pill.new { background: var(--status-new); }
    .status-pill.diagnosed { background: var(--status-diagnosed); }
    .status-pill.waiting { background: var(--status-waiting); }
    .status-pill.repair { background: var(--status-repair); }
    .status-pill.ready { background: var(--status-ready); }
    .status-pill.picked { background: var(--status-picked); }
    .status-pill.cancelled { background: var(--status-cancelled); }

    /* ============================================
       KANBAN BOARD
       ============================================ */
    .kanban-board {
      display: flex;
      gap: var(--space-5);
      height: 100%;
      overflow-x: auto;
      padding-bottom: var(--space-4);
      cursor: grab;
    }

    .kanban-board.grabbing {
      cursor: grabbing;
    }

    .kanban-board::-webkit-scrollbar {
      height: 8px;
    }

    .kanban-board::-webkit-scrollbar-track {
      background: var(--border-color);
      border-radius: 4px;
    }

    .kanban-board::-webkit-scrollbar-thumb {
      background: var(--text-muted);
      border-radius: 4px;
    }

    .kanban-column {
      min-width: 300px;
      width: 300px;
      background: var(--bg-input);
      border-radius: var(--radius-xl);
      display: flex;
      flex-direction: column;
      max-height: 100%;
    }

    .kanban-column-header {
      padding: var(--space-4);
      border-bottom: 1px solid var(--border-color);
      display: flex;
      align-items: center;
      gap: var(--space-3);
    }

    .kanban-column-icon {
      font-size: 18px;
    }

    .kanban-column-title {
      font-size: 14px;
      font-weight: 600;
      color: var(--text-primary);
      flex: 1;
    }

    .kanban-column-count {
      font-size: 12px;
      font-weight: 700;
      padding: 4px 10px;
      background: white;
      border-radius: var(--radius-full);
      color: var(--text-secondary);
    }

    .kanban-column-body {
      flex: 1;
      overflow-y: auto;
      padding: var(--space-3);
      scrollbar-width: none;
    }

    .kanban-column-body::-webkit-scrollbar {
      display: none;
    }

    /* Ticket in Kanban */
    .kanban-ticket {
      background: white;
      border-radius: var(--radius-md);
      padding: var(--space-3);
      margin-bottom: var(--space-3);
      cursor: pointer;
      transition: all var(--transition-fast);
      border: 1px solid var(--border-color);
      position: relative;
    }

    .kanban-ticket::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      bottom: 0;
      width: 3px;
      border-radius: var(--radius-md) 0 0 var(--radius-md);
    }

    .kanban-ticket.priority-urgent::before { background: var(--danger); }
    .kanban-ticket.priority-high::before { background: var(--warning); }
    .kanban-ticket.priority-normal::before { background: var(--success); }
    .kanban-ticket.priority-low::before { background: var(--text-muted); }

    .kanban-ticket:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-md);
      border-color: var(--primary);
    }

    .kanban-ticket-header {
      display: flex;
      justify-content: space-between;
      margin-bottom: var(--space-2);
    }

    .kanban-ticket-id {
      font-family: var(--font-mono);
      font-size: 11px;
      font-weight: 600;
      color: var(--primary);
    }

    .kanban-ticket-time {
      font-size: 11px;
      color: var(--text-muted);
    }

    .kanban-ticket-customer {
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 2px;
    }

    .kanban-ticket-device {
      font-size: 12px;
      color: var(--text-secondary);
      margin-bottom: var(--space-2);
    }

    .kanban-ticket-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .kanban-ticket-issue {
      font-size: 11px;
      padding: 3px 8px;
      background: var(--bg-input);
      border-radius: var(--radius-sm);
      color: var(--text-muted);
    }

    .kanban-ticket-price {
      font-family: var(--font-mono);
      font-size: 14px;
      font-weight: 700;
    }

    /* ============================================
       MODALS
       ============================================ */
    .modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(4px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: var(--z-modal);
      opacity: 0;
      visibility: hidden;
      transition: all var(--transition-normal);
    }

    .modal-overlay.open {
      opacity: 1;
      visibility: visible;
    }

    .modal {
      background: white;
      border-radius: var(--radius-xl);
      width: 90%;
      max-width: 600px;
      max-height: 90vh;
      display: flex;
      flex-direction: column;
      box-shadow: var(--shadow-lg);
      transform: scale(0.95) translateY(20px);
      transition: transform var(--transition-normal);
    }

    .modal-overlay.open .modal {
      transform: scale(1) translateY(0);
    }

    .modal-header {
      padding: var(--space-5) var(--space-6);
      border-bottom: 1px solid var(--border-color);
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .modal-title {
      font-size: 18px;
      font-weight: 700;
    }

    .modal-close {
      width: 36px;
      height: 36px;
      border: none;
      background: var(--bg-input);
      border-radius: var(--radius-md);
      color: var(--text-secondary);
      font-size: 18px;
      cursor: pointer;
      transition: all var(--transition-fast);
    }

    .modal-close:hover {
      background: var(--danger-light);
      color: var(--danger);
    }

    .modal-body {
      flex: 1;
      overflow-y: auto;
      padding: var(--space-6);
    }

    .modal-footer {
      padding: var(--space-4) var(--space-6);
      border-top: 1px solid var(--border-color);
      display: flex;
      justify-content: flex-end;
      gap: var(--space-3);
    }

    /* ============================================
       TOASTS
       ============================================ */
    .toast-container {
      position: fixed;
      top: var(--space-6);
      right: var(--space-6);
      z-index: var(--z-toast);
      display: flex;
      flex-direction: column;
      gap: var(--space-3);
    }

    .toast {
      display: flex;
      align-items: center;
      gap: var(--space-3);
      padding: var(--space-4) var(--space-5);
      background: white;
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow-lg);
      min-width: 300px;
      max-width: 450px;
      animation: slideIn 0.3s ease;
      border-left: 4px solid;
    }

    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateX(100%);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    .toast.success { border-left-color: var(--success); }
    .toast.error { border-left-color: var(--danger); }
    .toast.warning { border-left-color: var(--warning); }
    .toast.info { border-left-color: var(--info); }

    .toast-icon {
      font-size: 20px;
    }

    .toast-message {
      flex: 1;
      font-size: 14px;
      color: var(--text-primary);
    }

    .toast-close {
      background: none;
      border: none;
      color: var(--text-muted);
      cursor: pointer;
      padding: 4px;
    }

    /* ============================================
       WIZARD STEPS
       ============================================ */
    .wizard-steps {
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: var(--space-8);
    }

    .wizard-step {
      display: flex;
      align-items: center;
      gap: var(--space-3);
    }

    .wizard-step-number {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background: var(--bg-input);
      color: var(--text-muted);
      font-weight: 600;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all var(--transition-fast);
    }

    .wizard-step.active .wizard-step-number {
      background: var(--primary);
      color: white;
    }

    .wizard-step.completed .wizard-step-number {
      background: var(--success);
      color: white;
    }

    .wizard-step-label {
      font-size: 14px;
      font-weight: 500;
      color: var(--text-muted);
    }

    .wizard-step.active .wizard-step-label {
      color: var(--text-primary);
    }

    .wizard-step-line {
      width: 60px;
      height: 2px;
      background: var(--border-color);
      margin: 0 var(--space-3);
    }

    .wizard-step.completed + .wizard-step-line {
      background: var(--success);
    }

    /* ============================================
       TABLES
       ============================================ */
    .table {
      width: 100%;
      border-collapse: collapse;
    }

    .table th,
    .table td {
      padding: var(--space-3) var(--space-4);
      text-align: left;
      border-bottom: 1px solid var(--border-color);
    }

    .table th {
      font-size: 12px;
      font-weight: 600;
      color: var(--text-secondary);
      text-transform: uppercase;
      letter-spacing: 0.5px;
      background: var(--bg-input);
    }

    .table tr:hover td {
      background: var(--bg-input);
    }

    /* ============================================
       VIEW TOGGLE
       ============================================ */
    .view-toggle {
      display: flex;
      background: var(--bg-input);
      border-radius: var(--radius-md);
      padding: 3px;
    }

    .view-toggle-btn {
      padding: 8px 14px;
      border: none;
      background: transparent;
      color: var(--text-secondary);
      font-size: 13px;
      font-weight: 500;
      border-radius: var(--radius-sm);
      cursor: pointer;
      transition: all var(--transition-fast);
    }

    .view-toggle-btn.active {
      background: white;
      color: var(--text-primary);
      box-shadow: var(--shadow-sm);
    }

    /* ============================================
       FILTER TABS
       ============================================ */
    .filter-tabs {
      display: flex;
      gap: var(--space-2);
      margin-bottom: var(--space-5);
    }

    .filter-tab {
      padding: 8px 16px;
      border: none;
      background: transparent;
      color: var(--text-secondary);
      font-size: 14px;
      font-weight: 500;
      border-radius: var(--radius-md);
      cursor: pointer;
      transition: all var(--transition-fast);
    }

    .filter-tab:hover {
      background: var(--bg-input);
      color: var(--text-primary);
    }

    .filter-tab.active {
      background: var(--primary);
      color: white;
    }

    /* ============================================
       DROPDOWN
       ============================================ */
    .dropdown {
      position: relative;
    }

    .dropdown-menu {
      position: absolute;
      top: 100%;
      right: 0;
      margin-top: var(--space-2);
      min-width: 180px;
      background: white;
      border: 1px solid var(--border-color);
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow-lg);
      z-index: var(--z-dropdown);
      opacity: 0;
      visibility: hidden;
      transform: translateY(-10px);
      transition: all var(--transition-fast);
    }

    .dropdown.open .dropdown-menu {
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
    }

    .dropdown-item {
      display: flex;
      align-items: center;
      gap: var(--space-3);
      padding: var(--space-3) var(--space-4);
      font-size: 14px;
      color: var(--text-primary);
      cursor: pointer;
      transition: background var(--transition-fast);
    }

    .dropdown-item:hover {
      background: var(--bg-input);
    }

    .dropdown-item.danger {
      color: var(--danger);
    }

    .dropdown-divider {
      height: 1px;
      background: var(--border-color);
      margin: var(--space-2) 0;
    }

    /* ============================================
       EMPTY STATE
       ============================================ */
    .empty-state {
      text-align: center;
      padding: var(--space-10) var(--space-6);
    }

    .empty-state-icon {
      font-size: 48px;
      margin-bottom: var(--space-4);
    }

    .empty-state-title {
      font-size: 18px;
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: var(--space-2);
    }

    .empty-state-text {
      font-size: 14px;
      color: var(--text-secondary);
      margin-bottom: var(--space-5);
    }

    /* ============================================
       ANIMATIONS
       ============================================ */
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    @keyframes slideUp {
      from { 
        opacity: 0;
        transform: translateY(20px);
      }
      to { 
        opacity: 1;
        transform: translateY(0);
      }
    }

    .fade-in {
      animation: fadeIn 0.3s ease;
    }

    .slide-up {
      animation: slideUp 0.4s ease;
    }

    /* ============================================
       RESPONSIVE
       ============================================ */
    @media (max-width: 1024px) {
      .pos-sidebar {
        width: 72px;
      }
      
      .pos-sidebar .nav-link span:not(.icon) {
        display: none;
      }
      
      .sidebar-logo span,
      .nav-section-title,
      .sidebar-user .info {
        display: none;
      }
    }

    @media (max-width: 768px) {
      .pos-sidebar {
        display: none;
      }
      
      .pos-header {
        padding: var(--space-3) var(--space-4);
      }
      
      .pos-content {
        padding: var(--space-4);
      }
      
      .kanban-column {
        min-width: 280px;
        width: 280px;
      }
    }
  </style>
  <link rel="stylesheet" href="/pos/css/theme-dark.css">
  <link rel="stylesheet" href="/pos/css/premium-design.css">
</head>
<body>
  <div class="pos-app">
    <!-- Sidebar -->
    <aside class="pos-sidebar" id="sidebar">
      <div class="sidebar-header">
        <a href="index.html" class="sidebar-logo">
          <img src="https://i.ibb.co/GfPnk0zV/preview.webp" alt="Fixology">
          <span>Fixology</span>
        </a>
      </div>
      
      <nav class="sidebar-nav">
        <div class="nav-section">
          <div class="nav-section-title">Main</div>
          <a href="index.html" class="nav-link">
            <span class="icon">üìä</span>
            <span>Dashboard</span>
          </a>
          <a href="tickets.html" class="nav-link active">
            <span class="icon">üé´</span>
            <span>Tickets</span>
            <span class="badge" id="ticket-count">0</span>
          </a>
          <a href="customers.html" class="nav-link">
            <span class="icon">üë•</span>
            <span>Customers</span>
          </a>
          <a href="inventory.html" class="nav-link">
            <span class="icon">üì¶</span>
            <span>Inventory</span>
          </a>
        </div>
        
        <div class="nav-section">
          <div class="nav-section-title">Tools</div>
          <a href="../dashboard/imei.html" class="nav-link">
            <span class="icon">üì±</span>
            <span>IMEI Check</span>
          </a>
          <a href="../dashboard/diagnostics.html" class="nav-link">
            <span class="icon">üß†</span>
            <span>AI Diagnose</span>
          </a>
        </div>
        
        <div class="nav-section">
          <div class="nav-section-title">Settings</div>
          <a href="settings.html" class="nav-link">
            <span class="icon">‚öôÔ∏è</span>
            <span>Settings</span>
          </a>
        </div>
      </nav>
      
      <div class="sidebar-footer">
        <div class="sidebar-user">
          <div class="avatar">F</div>
          <div class="info">
            <div class="name">Fixology</div>
            <div class="role">Admin</div>
          </div>
        </div>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="pos-main">
      <!-- Header -->
      <header class="pos-header">
        <div class="header-left">
          <h1 class="header-title">
            üé´ Tickets
            <span class="count" id="header-count">0</span>
          </h1>
          <div class="header-stats" style="display:flex;gap:20px;margin-left:20px;font-size:14px;color:var(--text-secondary)">
            <span><strong id="stat-today">0</strong> today</span>
            <span><strong id="stat-revenue">$0</strong> revenue</span>
          </div>
        </div>
        <div class="header-right">
          <div class="search-box">
            <span class="icon">üîç</span>
            <input type="text" class="form-input" placeholder="Search tickets..." id="search-input">
          </div>
          <div class="view-toggle">
            <button class="view-toggle-btn active" data-view="kanban">Board</button>
            <button class="view-toggle-btn" data-view="list">List</button>
          </div>
          <button class="btn btn-ghost btn-sm" id="focus-toggle">üåô Focus</button>
          <a href="ticket-new.html" class="btn btn-primary">+ New Ticket</a>
        </div>
      </header>

      <!-- Filter Tabs -->
      <div style="padding: 0 var(--space-6); padding-top: var(--space-4);">
        <div class="filter-tabs" id="filter-tabs">
          <button class="filter-tab active" data-filter="all">All</button>
          <button class="filter-tab" data-filter="new">New</button>
          <button class="filter-tab" data-filter="in_progress">In Progress</button>
          <button class="filter-tab" data-filter="ready">Ready</button>
          <button class="filter-tab" data-filter="picked_up">Picked Up</button>
        </div>
      </div>

      <!-- Content Area -->
      <div class="pos-content" style="padding-top: var(--space-4);">
        
        <!-- Kanban View -->
        <div id="kanban-view" class="kanban-board">
          <!-- Columns will be rendered by JS -->
        </div>

        <!-- List View (hidden by default) -->
        <div id="list-view" style="display: none;">
          <div class="card">
            <table class="table" id="tickets-table">
              <thead>
                <tr>
                  <th>Ticket</th>
                  <th>Customer</th>
                  <th>Device</th>
                  <th>Issue</th>
                  <th>Status</th>
                  <th>Price</th>
                  <th>Created</th>
                  <th></th>
                </tr>
              </thead>
              <tbody id="tickets-tbody">
                <!-- Rows rendered by JS -->
              </tbody>
            </table>
          </div>
        </div>

        <!-- Empty State -->
        <div id="empty-state" class="empty-state" style="display: none;">
          <div class="empty-state-icon">üé´</div>
          <h3 class="empty-state-title">No tickets yet</h3>
          <p class="empty-state-text">Create your first repair ticket to get started</p>
          <a href="ticket-new.html" class="btn btn-primary">+ New Ticket</a>
        </div>
      </div>
    </main>
  </div>

  <script src="js/pos-data.js"></script>
  <script src="js/pos-core.js"></script>
  <script>
    // State
    let currentView = 'kanban';
    let currentFilter = 'all';
    let searchQuery = '';
    let focusMode = localStorage.getItem('pos_focus_mode') === '1';

    // Initialize
    document.addEventListener('DOMContentLoaded', () => {
      loadTickets();
      setupEventListeners();
      updateStats();
      applyFocusMode();
    });

    function setupEventListeners() {
      // View toggle
      document.querySelectorAll('.view-toggle-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          document.querySelectorAll('.view-toggle-btn').forEach(b => b.classList.remove('active'));
          btn.classList.add('active');
          currentView = btn.dataset.view;
          renderTickets();
        });
      });

      // Filter tabs
      document.querySelectorAll('.filter-tab').forEach(tab => {
        tab.addEventListener('click', () => {
          document.querySelectorAll('.filter-tab').forEach(t => t.classList.remove('active'));
          tab.classList.add('active');
          currentFilter = tab.dataset.filter;
          renderTickets();
        });
      });

      // Search
      document.getElementById('search-input').addEventListener('input', POS.debounce((e) => {
        searchQuery = e.target.value;
        renderTickets();
      }, 300));

      // Focus toggle
      document.getElementById('focus-toggle').addEventListener('click', toggleFocusMode);
    }

    function toggleFocusMode() {
      focusMode = !focusMode;
      localStorage.setItem('pos_focus_mode', focusMode ? '1' : '0');
      applyFocusMode();
    }

    function applyFocusMode() {
      document.body.classList.toggle('focus-mode', focusMode);
      const btn = document.getElementById('focus-toggle');
      if (btn) {
        btn.textContent = focusMode ? '‚òÄÔ∏è Exit Focus' : 'üåô Focus';
      }
    }

    function loadTickets() {
      renderTickets();
    }

    function getFilteredTickets() {
      let tickets = POS_DATA.getTickets();

      // Apply search
      if (searchQuery) {
        const q = searchQuery.toLowerCase();
        tickets = tickets.filter(t =>
          t.id.toLowerCase().includes(q) ||
          t.customer?.name?.toLowerCase().includes(q) ||
          t.customer?.phone?.includes(q) ||
          t.device?.model?.toLowerCase().includes(q)
        );
      }

      // Apply filter
      if (currentFilter !== 'all') {
        if (currentFilter === 'in_progress') {
          tickets = tickets.filter(t => ['diagnosed', 'waiting_parts', 'in_repair'].includes(t.status));
        } else {
          tickets = tickets.filter(t => t.status === currentFilter);
        }
      }

      return tickets;
    }

    function renderTickets() {
      const tickets = getFilteredTickets();
      
      // Update counts
      document.getElementById('ticket-count').textContent = tickets.length;
      document.getElementById('header-count').textContent = tickets.length;

      // Show/hide empty state
      const isEmpty = tickets.length === 0;
      document.getElementById('empty-state').style.display = isEmpty ? 'block' : 'none';
      document.getElementById('kanban-view').style.display = isEmpty ? 'none' : (currentView === 'kanban' ? 'flex' : 'none');
      document.getElementById('list-view').style.display = isEmpty ? 'none' : (currentView === 'list' ? 'block' : 'none');

      if (isEmpty) return;

      if (currentView === 'kanban') {
        renderKanban(tickets);
      } else {
        renderList(tickets);
      }
    }

    function renderKanban(tickets) {
      const columns = [
        { status: 'new', label: 'New', icon: 'üì•' },
        { status: 'diagnosed', label: 'Diagnosed', icon: 'üîç' },
        { status: 'waiting_parts', label: 'Waiting Parts', icon: 'üì¶' },
        { status: 'in_repair', label: 'In Repair', icon: 'üîß' },
        { status: 'ready', label: 'Ready', icon: '‚úÖ' },
        { status: 'picked_up', label: 'Picked Up', icon: 'üí∞' }
      ];

      const board = document.getElementById('kanban-view');
      board.innerHTML = columns.map(col => {
        const colTickets = tickets.filter(t => t.status === col.status);
        return `
          <div class="kanban-column" data-status="${col.status}">
            <div class="kanban-column-header">
              <span class="kanban-column-icon">${col.icon}</span>
              <span class="kanban-column-title">${col.label}</span>
              <span class="kanban-column-count">${colTickets.length}</span>
            </div>
            <div class="kanban-column-body">
              ${colTickets.map(t => renderKanbanTicket(t)).join('')}
            </div>
          </div>
        `;
      }).join('');

      // Add click handlers
      board.querySelectorAll('.kanban-ticket').forEach(card => {
        card.addEventListener('click', () => {
          window.location.href = `ticket-view.html?id=${card.dataset.id}`;
        });
      });
    }

    function renderKanbanTicket(ticket) {
      const priorityClass = ticket.priority || 'normal';
      return `
        <div class="kanban-ticket priority-${priorityClass}" data-id="${ticket.id}">
          <div class="kanban-ticket-header">
            <span class="kanban-ticket-id">${ticket.id}</span>
            <span class="kanban-ticket-time">${POS.timeAgo(ticket.createdAt)}</span>
          </div>
          <div class="kanban-ticket-customer">${POS.escapeHtml(ticket.customer?.name || 'Unknown')}</div>
          <div class="kanban-ticket-device">${POS.getDeviceIcon(ticket.device?.type)} ${POS.escapeHtml(ticket.device?.model || 'Unknown Device')}</div>
          <div class="kanban-ticket-footer">
            <span class="kanban-ticket-issue">${POS.escapeHtml(ticket.repair?.type?.replace(/_/g, ' ') || 'Repair')}</span>
            <span class="kanban-ticket-price">${POS.formatCurrency(ticket.pricing?.total)}</span>
          </div>
        </div>
      `;
    }

    function renderList(tickets) {
      const tbody = document.getElementById('tickets-tbody');
      tbody.innerHTML = tickets.map(t => `
        <tr onclick="window.location.href='ticket-view.html?id=${t.id}'" style="cursor:pointer;">
          <td>
            <div style="font-family: var(--font-mono); font-weight: 600; color: var(--primary);">${t.id}</div>
          </td>
          <td>
            <div style="font-weight: 500;">${POS.escapeHtml(t.customer?.name || 'Unknown')}</div>
            <div style="font-size: 12px; color: var(--text-muted);">${t.customer?.phone || ''}</div>
          </td>
          <td>
            <div>${POS.getDeviceIcon(t.device?.type)} ${POS.escapeHtml(t.device?.model || 'Unknown')}</div>
            <div style="font-size: 12px; color: var(--text-muted);">${t.device?.brand || ''}</div>
          </td>
          <td>${POS.escapeHtml(t.repair?.type?.replace(/_/g, ' ') || 'Repair')}</td>
          <td><span class="status-pill ${POS.getStatusClass(t.status)}">${POS.getStatusLabel(t.status)}</span></td>
          <td style="font-family: var(--font-mono); font-weight: 600;">${POS.formatCurrency(t.pricing?.total)}</td>
          <td style="color: var(--text-muted);">${POS.timeAgo(t.createdAt)}</td>
          <td>
            <button class="btn btn-ghost btn-icon" onclick="event.stopPropagation(); window.location.href='ticket-view.html?id=${t.id}'">‚Üí</button>
          </td>
        </tr>
      `).join('');
    }

    function updateStats() {
      const stats = POS_DATA.getStats();
      document.getElementById('stat-today').textContent = stats.todayTickets;
      document.getElementById('stat-revenue').textContent = POS.formatCurrency(stats.todayRevenue);
    }
  </script>
</body>
</html>

